---
title: "Rをはじめよう"
emoji: "R"
type: "tech"
topics: ["R"]
published: false
---

# 統計解析ツールR完全ガイド：ゼロから始める手順書

## はじめに

最近では統計的に考えることが求められる時代に突入しました。マーケティングやコンサルティング、企業の企画立案、独立して会社を立ち上げる際にも、統計的に数字を見て判断することが求められています。

このガイドでは、統計解析に有効なツールであるRの導入から基本的な分析まで、手順を追って解説します。

## 前提条件

本ガイドでは、以下の知識を前提としています：

- プログラミングの基本概念（変数、関数、データ型など）
- ターミナル（コマンドライン）の基本操作
プログラミングの基礎を学びたい方は、[こちらの記事](https://aniu.ma/blog/1095/)を先にご覧ください。

---

## ステップ1：Rのインストール

### 1-1. macOSへのインストール

ターミナルを開き、以下のコマンドを実行します：

```bash
brew install r
```

**補足：** Homebrewがインストールされていない場合は、事前にインストールしてください。

---

## ステップ2：Rの起動と開発環境の選択

### 2-1. ターミナルからの起動

ターミナルで以下のコマンドを入力：

```bash
R
```

### 2-2. RStudioの利用（推奨）

より使いやすい統合開発環境（IDE）として、RStudioの利用を推奨します。

1. [RStudioのダウンロードページ](https://posit.co/download/rstudio-desktop/)にアクセス
1. macOS版をダウンロードしてインストール
1. RStudioを起動
---

## ステップ3：Rの基本操作を習得する

### 3-1. 簡単な計算を試す

```r
# 足し算
2 + 3

# 変数への代入
x <- 10
y <- 5
x + y

# ベクトルの作成
numbers <- c(1, 2, 3, 4, 5)
mean(numbers)  # 平均値を計算
```

### 3-2. データの読み込み

```r
# CSVファイルを読み込む
data <- read.csv("ファイル名.csv")

# データの確認
head(data)      # 最初の6行を表示
summary(data)   # 要約統計量を表示
```

### 3-3. グラフの作成

```r
# 散布図
plot(x, y)

# ヒストグラム
hist(numbers)
```

---

## ステップ4：パッケージのインストールと設定

### 4-1. TSSSパッケージのインストール

時系列解析に必要なTSSSパッケージをインストールします。

```r
# パッケージのインストール
install.packages("TSSS")
```

### 4-2. ミラーサイトの選択

インストール時にミラーサイトの選択を求められます。以下のように「48: Japan (Yonezawa)」を選択してください：

```javascript
Selection: 48
```

### 4-3. パッケージの読み込みと確認

```r
# パッケージの読み込み
library(TSSS)

# バージョン確認
packageVersion("TSSS")

# ヘルプを表示
?TSSS
```

---

## ステップ5：作業ディレクトリの設定

### 5-1. 現在の作業ディレクトリを確認

```r
getwd()
```

### 5-2. CSVファイルの存在確認

```r
list.files(pattern = "\\.csv$")
```

### 5-3. ディレクトリの変更（必要に応じて）

```r
setwd("~/Mywork/統計")  # パスは適宜変更
```

**Tips：** ターミナルで `cd` コマンドを使ってデータファイルのあるディレクトリに移動してからRを起動すると便利です。

---

## ステップ6：サンプルデータのインポート

### 6-1. 単一データのインポート

```r
data(HAKUSAN)
head(HAKUSAN)  # 最初の6行を確認
```

### 6-2. 複数データの一括インポート

```r
data(HAKUSAN)      # 船舶の航行中の多変量データ
data(Sunspot)      # 太陽黒点数データ
data(Temperature)  # 東京の日最高気温データ
data(BLSALLFOOD)   # アメリカの食品産業の従事者数
data(WHARD)        # あるハードウェアの卸売高データ
data(MYE1F)        # 地震波データ
data(Nikkei225)    # 日経225平均株価データ
data(Rainfall)     # 各月日について東京で2年間に雨が降った回数
data(Haibara)      # 地下水位データ
```

### 6-3. 独自データ（CSV）のインポート

手元にあるCSVファイルを使用する場合：

```r
# 基本的なインポート
sunspot <- as.ts(read.csv("sunspot.csv"))

# 時系列データとして指定
blsfood <- as.ts(read.csv("blsfood_new.csv"), 
                 start = c(1967, 1), 
                 frequency = 12)
```

---

## ステップ7：データの可視化

### 7-1. 基本的なプロット

```r
par(mar = c(2, 2, 3, 1) + 0.1)
plot(HAKUSAN[,1], main = "(a) 船舶の方向角速度")
```

### 7-2. 複数データのプロット

```r
par(mar = c(2, 2, 3, 1) + 0.1)

plot(HAKUSAN[,1], main = "(a) 船舶の方向角速度")
plot(Sunspot, main = "(b) 太陽黒点数")
plot(Temperature, main = "(c) 東京の日最高気温")
plot(BLSALLFOOD, main = "(d) 食品産業従事者数")
plot(WHARD, main = "(e) 卸売高")
plot(MYE1F, main = "(f) 地震波(東西方向)")
plot(Nikkei225, main = "(g) 日経225平均株価")
plot(Haibara, main = "(h) 地下水位(上段)と気圧(下段)")
```

### 7-3. グラフタイプの指定

plotのtypeオプションで、さまざまなグラフ形式を選択できます：

- `type = "l"`: 線グラフ（line）
- `type = "p"`: 点グラフ（points）
- `type = "b"`: 点と線の両方（both）
- `type = "o"`: 重ね描き（overplotted）
- `type = "h"`: ヒストグラム風（histogram-like）
- `type = "s"`: 階段状（steps）
- `type = "n"`: 何も描かない（no plotting）
### 7-4. 対数変換とグラフの比較

```r
data(WHARD)
log_WHARD <- log10(WHARD)

par(mfrow = c(2, 1), mar = c(2, 4, 1, 1) + 0.1)
plot(WHARD, type = "l", main = "元データ")
plot(log_WHARD, type = "l", main = "対数変換後")
```

---

## よく使う関数リファレンス

### データ操作

- `diff()`: 差分を計算
- `mean()`: 平均値
- `summary()`: 要約統計量
- `head()`: データの先頭部分を表示
### パッケージ管理

- `install.packages()`: パッケージのインストール
- `library()`: パッケージの読み込み
- `packageVersion()`: バージョン確認
### グラフ描画

- `plot()`: 基本的なプロット
- `hist()`: ヒストグラム
- `par()`: グラフィックパラメータの設定
---

## まとめ

このガイドでは、Rの導入から基本的なデータ分析・可視化までの手順を解説しました。

**習得した内容：**

1. Rのインストールと起動方法
1. 基本的なR言語の操作
1. パッケージのインストールと管理
1. データのインポート方法
1. データの可視化技術
統計解析は実践を重ねることで上達します。まずは本ガイドの手順に従って操作に慣れ、徐々に自分のデータで分析を行ってみてください。

より詳しい内容については、専門書籍やオンラインリソースを参照してください。

