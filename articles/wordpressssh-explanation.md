---
title: "WordPressにsshで直接テーマ・プラグインのインポート方法"
emoji: "📝"
type: "tech"
topics: []
published: true
---

# ロリポップサーバーにSSHでWordPressファイルを直接転送する方法

WordPressのテーマやプラグインを開発していると、管理画面からのアップロードでは容量制限に引っかかったり、大量のファイルを一つずつ選ぶのが面倒だったりしますよね。

今回は、**SSH経由でコマンドラインから直接ファイルを転送する方法**を解説します。特にロリポップサーバーを例に、`scp`と`rsync`を使った効率的な転送方法をご紹介します。

---

## 前準備：SSH情報の確認

まずは、ロリポップの管理画面で以下の情報を確認しておきましょう。

- **サーバー名**: [`sshXXX.lolipop.jp`](http://sshxxx.lolipop.jp/) など
- **ポート番号**: `2222`（ロリポップは標準の22ではなく**2222**です）
- **ユーザー名**: ユーザー専用ページのアカウント名
- **パスワード**: SSHパスワード
> **ポイント**: ロリポップはセキュリティ上、SSH接続に標準の22番ポートではなく**2222番ポート**を使用しています。コマンド実行時は必ず `-P 2222` を指定してください。

---

## 方法1：scpコマンドでファイルを転送する

`scp`（Secure Copy）は、SSH経由でファイルをコピーするためのコマンドです。

### ローカルからサーバーへ送る（アップロード）

PCのターミナルで、転送したいフォルダがある階層に移動して以下を実行します。

```bash
scp -P 2222 -r wp-content/ ユーザー名@サーバー名:/home/users/X/XXX/web/wordpress/
```

**オプションの意味**:

- `-P 2222`: ポート番号の指定（**P**は大文字）
- `-r`: ディレクトリ（フォルダ）ごと再帰的にコピー
---

## 方法2：rsyncコマンドで差分転送する（おすすめ）

ファイル数が多い場合、**変更があったファイルだけを高速に転送できる**`rsync`が非常に便利です。

```bash
rsync -avz -e "ssh -p 2222" wp-content/ ユーザー名@サーバー名:/home/users/X/XXX/web/wordpress/wp-content/
```

**オプションの意味**:

- `-a`: アーカイブモード（権限などを維持）
- `-v`: 詳細表示（転送状況を確認）
- `-z`: 圧縮して転送（通信量を削減）
- `-e "ssh -p 2222"`: SSHのポート2222を使用
### rsyncの利点

- **差分転送**: 変更されたファイルだけを転送するので高速
- **中断再開**: 途中で止まっても再実行すれば続きから転送
- **帯域節約**: 圧縮転送で通信量を削減
2回目以降の転送では、初回に比べて劇的に速くなります！

---

## サーバーからPCへダウンロードする場合

バックアップなどでサーバーのデータをPCに持ってきたいときは、**送り先と送り元を逆に書くだけ**です。

### scpでダウンロード

```bash
scp -P 2222 -r ユーザー名@サーバー名:/home/users/X/XXX/web/wordpress/wp-content ./
```

### rsyncでダウンロード

```bash
rsync -avz -e "ssh -p 2222" ユーザー名@サーバー名:/home/users/X/XXX/web/wordpress/wp-content/ ./wp-content/
```

---

## 注意点：パスの確認方法

ロリポップの**フルパス（絶対パス）**は、管理画面の「アカウント情報」に記載されている**サーバーのパス**を確認してください。

例: `/home/users/1/`[`lolipop.jp`](http://lolipop.jp/)`-xxx/web/`

WordPressのインストール場所によって、このパスの後ろに適切なディレクトリ名を追加します。

---

## ワンポイント：大量ファイルは圧縮してから転送

画像が大量にある場合は、以下の手順で圧縮してから転送すると**劇的に速く**なります。

### 1. ローカルで圧縮

```bash
tar -czf wp-content.tar.gz wp-content/
```

### 2. 圧縮ファイルを転送

```bash
scp -P 2222 wp-content.tar.gz ユーザー名@サーバー名:/home/users/X/XXX/web/wordpress/
```

### 3. サーバー側で解凍

SSHでサーバーにログインして解凍：

```bash
cd /home/users/X/XXX/web/wordpress/
tar -zxvf wp-content.tar.gz
```

数百MB〜数GBのファイルでも、この方法なら一瞬で完了します！

---

## まとめ

**初めての方は**まず特定の1ファイルだけをテストで転送してみることをおすすめします。慣れてきたら、`rsync`で定期的に同期する運用が快適ですよ。

SSH接続でのファイル転送をマスターすれば、WordPress開発の効率が格段に上がります。ぜひ試してみてください！

